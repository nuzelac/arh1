CTLR		`EQU		0FFFF0000
CTCR		`EQU		0FFFF0004
CTCLEAR		`EQU		0FFFF0008
CTIEND		`EQU		0FFFF000C

DMASRC		`EQU		0FFFF1000
DMADEST		`EQU		0FFFF1004
DMACNT		`EQU		0FFFF1008
DMACTRL		`EQU		0FFFF100C
DMASTART	`EQU		0FFFF1010
DMACLEAR	`EQU		0FFFF1014

BVJ			`EQU		0FFFFFFFC


			`ORG 0
			MOVE 1F0, R1	; pocetak bloka
			MOVE 0, R3		; brojac ukupno poslanih

			MOVE %D 1000, R0
			STORE R0, (CTLR)
			MOVE %B 10, R0
			STORE R0, (CTCR)

PETLJA		LOAD R0, (CTCR)
			CMP R0, 0
			JR_Z PETLJA
			STORE R0, (CTCLEAR)

			MOVE BVJ, R2
			STORE R2, (DMASRC)
			STORE R1, (DMADEST)
			MOVE %D 10, R2
			STORE R2, (DMACNT)
			MOVE %B 0110, R2
			STORE R2, (DMACTRL)

			STORE R2, (DMASTART)

PETLJA2		LOAD R2, (DMACTRL)
			CMP R2, 0
			JR_Z PETLJA2					

			STORE R2, (DMACLEAR)
			ADD R1, %D 40, R1
			ADD R3, 1, R3

			CMP R3, %D 10
			STORE R0, (CTIEND)
			JR_NZ PETLJA

			HALT

POCETAK		DW 1F0
